datasource db {
  provider = "postgresql" // Cambiamos el proveedor a PostgreSQL
  url      = env("DATABASE_URL")
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

model User {
  id               Int        @id @default(autoincrement()) // Autoincrement para PostgreSQL
  email            String     @unique // Correo electrónico único
  password         String // Contraseña
  firstName        String // Primer nombre
  lastName         String // Apellido
  createdAt        DateTime   @default(now()) // Timestamp de creación
  updatedAt        DateTime   @updatedAt // Timestamp que se actualiza automáticamente
  phoneNumber      String? // Teléfono opcional
  address          String? // Dirección opcional
  age              Int? // Edad opcional
  resetToken       String?    @map("resettoken") // Especifica en minúsculas
  resetTokenExpiry DateTime?  @map("resettokenexpiry") // Especifica en minúsculas
  Partidos         Partidos[] // Relación con la tabla Partidos
  PartidosUnidos   Partidos_club[] @relation("Partidos_clubToUser", fields: [id], references: [id])
}

model Club {
  id          Int      @id @default(autoincrement())
  name        String
  email       String   @unique
  password    String
  phoneNumber String?
  address     String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  Partidos_club Partidos_club[] // Add this line

}

model Partidos {
  id        Int      @id @default(autoincrement()) // Autoincrement para PostgreSQL
  userId    Int // Clave foránea a la tabla Users
  fecha     DateTime @default(now()) // Fecha del partido con valor por defecto
  jugadores String // Lista de jugadores
  resultado String // Resultado del partido

  User User @relation(fields: [userId], references: [id]) // Relación con la tabla Users
}

model Partidos_club {
  id        Int      @id @default(autoincrement())
  date      DateTime
  time      String
  court     String
  players   Int      @default(0) // Número de jugadores actualmente unidos
  maxPlayers Int     @default(4) // Número máximo de jugadores permitidos
  clubId     Int   // Add this line
  Club       Club     @relation(fields: [clubId], references: [id]) // Add this line
  Usuarios   User[] @relation("Partidos_clubToUser", fields: [id], references: [id])
}

